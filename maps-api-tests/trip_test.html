<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps API Example</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBxGK0zOZL2VF3vaikld24WgCdGN5cDSNY"></script>
  </head>
  <body>
    <div id="map" style="height: 400px; width: 100%;"></div>
    <div id="eta" style="margin-top: 10px;"></div>
    <button id="startTrip">Start Trip</button>
    <script>
      var map, directionsService, directionsDisplay;
      var trip = {
        status: "not_started",
      };

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 39.993330, lng: -75.243300 },
          zoom: 10,
        });

        // Create a DirectionsService
        directionsService = new google.maps.DirectionsService();

        // Create a DirectionsRenderer to display the route on the map
        directionsDisplay = new google.maps.DirectionsRenderer({ map: map });

        // Set up the event listener for the "Start Trip" button
        document.getElementById("startTrip").addEventListener("click", startTrip);
      }

      function startTrip() {
        if (trip.status === "not_started") {
          trip.origin = { lat: 39.987960, lng: -75.248980 };
          trip.destination = { lat: 39.993600, lng: -75.239560 };
          trip.status = "in_progress";
          getETA();
          document.getElementById("startTrip").disabled = true;
        }
      }

      function getETA() {
        var request = {
          origin: trip.origin,
          destination: trip.destination,
          travelMode: "DRIVING",
        };

        directionsService.route(request, function (result, status) {
          if (status == "OK") {
            directionsDisplay.setDirections(result);
            var route = result.routes[0];
            var leg = route.legs[0];
            var eta = leg.duration.text;
            document.getElementById("eta").innerHTML = "ETA: " + eta;
          }
        });
      }

      initMap();
    </script>
  </body>
</html>

